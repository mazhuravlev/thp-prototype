webpackJsonp([4],{217:function(t,n,e){"use strict";var o=e(26),r=e(0);e.d(n,"a",(function(){return a}));var a=(function(){function t(){this.nodes=[{name:"start",label:"Начало",className:draw2d.shape.node.Product},{name:"end",label:"Конец",className:draw2d.shape.node.End},{name:"operation",label:"Операция",className:draw2d.shape.node.Operation},{name:"condition",label:"Условие",className:draw2d.shape.node.Condition},{name:"sync",label:"Синхронизация",className:draw2d.shape.node.Sync},{name:"product",label:"Продукт",className:draw2d.shape.node.Product},{name:"block",label:"Блок",className:draw2d.shape.node.Block}]}return t.prototype.getNodeTypes=function(){return this.nodes},t.prototype.getNodeType=function(t){if(!t)throw new Error("Не задан тип узла");var n=this.nodes.filter((function(n){return n.name===t}));if(0===n.length)throw new Error("Неизвестный тип узла: '"+t+"'");return n[0]},t.prototype.getNodeInstance=function(t){return new(this.getNodeType(t).className)},t})();a=o.a([e.i(r.p)()],a)},251:function(t,n,e){"use strict";var o=e(103),r=e(0);e.d(n,"a",(function(){return s})),e.d(n,"b",(function(){return c}));var a=[],i=function(t){return t};e.i(r.a)(),i=function(t){return e.i(o.a)(),t},a=a.slice();var s=i,c=a.slice()},338:function(t,n,e){"use strict";var o=e(523);e.d(n,"a",(function(){return o.a}))},339:function(t,n,e){"use strict";var o=e(529);e.d(n,"a",(function(){return o.a}))},340:function(t,n,e){"use strict";var o=e(532);e.d(n,"a",(function(){return o.a}))},392:function(t,n){function e(t){throw new Error("Cannot find module '"+t+"'.")}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id=392},394:function(t,n,e){"use strict";var o=e(525);e.d(n,"a",(function(){return o.a}))},523:function(t,n,e){"use strict";var o=e(26),r=e(0),a=e(253);e.d(n,"a",(function(){return i}));var i=(function(){function t(t){this.route=t}return t.prototype.ngOnInit=function(){var t=this;this.route.data.subscribe((function(n){t.localState=n.yourData})),console.log("hello `About` component"),this.asyncDataWithWebpack()},t.prototype.asyncDataWithWebpack=function(){var t=this;setTimeout((function(){e.e(2).then(e.bind(null,708)).then((function(n){console.log("async mockData",n),t.localState=n}))}))},t})();i=o.a([e.i(r._2)({selector:"about",styles:["\n  "],template:"\n    <h1>About</h1>\n    <div>\n      For hot module reloading run\n      <pre>npm run start:hmr</pre>\n    </div>\n    <div>\n      <h3>\n        patrick@AngularClass.com\n      </h3>\n    </div>\n    <pre>this.localState = {{ localState | json }}</pre>\n  "}),o.b("design:paramtypes",[a.c])],i)},524:function(t,n,e){"use strict";var o=e(26),r=e(0);e.d(n,"a",(function(){return a}));var a=(function(){function t(){}return t})();a=o.a([e.i(r._2)({selector:"app",encapsulation:r.O.None,styles:[e(702)],template:e(682)})],a)},525:function(t,n,e){"use strict";var o=e(26),r=e(103),a=e(414),i=e(492),s=e(0),c=e(252),d=(e.n(c),e(253)),u=e(251),l=e(527),p=e(524),f=e(526),h=e(528),v=e(339),b=e(338),y=e(340),g=e(530),m=e(680),w=(e.n(m),e(681)),N=(e.n(w),e(534)),k=e(533),S=e(217);e.d(n,"a",(function(){return _}));var D=f.a.concat([h.a]),_=(function(){function t(t,n){this.appRef=t,this.appState=n}return t.prototype.hmrOnInit=function(t){if(t&&t.state){if(console.log("HMR store",JSON.stringify(t,null,2)),this.appState._state=t.state,"restoreInputValues"in t){var n=t.restoreInputValues;setTimeout(n)}this.appRef.tick(),delete t.state,delete t.restoreInputValues}},t.prototype.hmrOnDestroy=function(t){var n=this.appRef.components.map((function(t){return t.location.nativeElement})),o=this.appState._state;t.state=o,t.disposeOldHosts=e.i(c.createNewHosts)(n),t.restoreInputValues=e.i(c.createInputTransfer)(),e.i(c.removeNgStyles)()},t.prototype.hmrAfterDestroy=function(t){t.disposeOldHosts(),delete t.disposeOldHosts},t})();_=o.a([e.i(s.i)({bootstrap:[p.a],declarations:[p.a,b.a,v.a,y.a,g.a,N.a,k.a],imports:[r.b,a.a,i.a,d.a.forRoot(l.a,{useHash:!0,preloadingStrategy:d.b})],providers:[u.b,D,S.a]}),o.b("design:paramtypes",[s.K,h.a])],_)},526:function(t,n,e){"use strict";var o=e(26),r=e(0),a=e(17),i=(e.n(a),e(689));e.n(i);e.d(n,"a",(function(){return c}));var s=(function(){function t(){}return t.prototype.resolve=function(t,n){return a.Observable.of({res:"I am data"})},t})();s=o.a([e.i(r.p)()],s);var c=[s]},527:function(t,n,e){"use strict";var o=e(339),r=e(338),a=e(340);e.d(n,"a",(function(){return i}));var i=[{path:"",component:o.a},{path:"home",component:o.a},{path:"about",component:r.a},{path:"detail",loadChildren:function(){return e.e(0).then(e.bind(null,707)).then((function(t){return t.DetailModule}))}},{path:"barrel",loadChildren:function(){return e.e(1).then(e.bind(null,706)).then((function(t){return t.BarrelModule}))}},{path:"**",component:a.a}]},528:function(t,n,e){"use strict";var o=e(26),r=e(0);e.d(n,"a",(function(){return a}));var a=(function(){function t(){this._state={}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state=this._clone(this._state)},set:function(t){throw new Error("do not mutate the `.state` directly")},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=this.state;return n.hasOwnProperty(t)?n[t]:n},t.prototype.set=function(t,n){return this._state[t]=n},t.prototype._clone=function(t){return JSON.parse(JSON.stringify(t))},t})();a=o.a([e.i(r.p)()],a)},529:function(t,n,e){"use strict";var o=e(26),r=e(217),a=e(0);e.d(n,"a",(function(){return i}));var i=(function(){function t(t){this.nodesService=t,this.currentModelPart="main",this.portsVisible=!0,this.SAVED_MODEL_KEY="model"}return t.prototype.ngOnInit=function(){var t=this;this.canvas=new draw2d.Canvas("gfx_holder"),document.querySelectorAll("svg")[0].style.position="relative",this.canvas.installEditPolicy(new draw2d.policy.connection.OrthogonalConnectionCreatePolicy),this.load(),this.canvas.on("select",(function(n,e){t.selectedNode=e.figure,null!=e.figure&&console.log(e.figure)})),this.canvas.on("connect",(function(t,n){if(n){var e=n.connection;e instanceof draw2d.Connection&&(e.setStroke(1),e.setColor("#000000"))}}))},t.prototype.setRadius=function(t,n){try{t.setRadius(n)}catch(t){alert("Не удалось установить радиус:"+t.message)}},t.prototype.isConnection=function(t){return t instanceof draw2d.Connection},t.prototype.isBlock=function(t){return t instanceof draw2d.shape.node.Block},t.prototype.editBlock=function(t){this.save(),this.currentModelPart="block_"+t.id;try{this.load()}catch(t){this.canvas.clear()}},t.prototype.backToMainModel=function(){this.save(),this.currentModelPart="main",this.load()},t.prototype.setArrows=function(t){var n=new draw2d.decoration.connection.connectionPikArrowDecorator;t.sourceDecorator?(t.setSourceDecorator(null),t.setTargetDecorator(n)):(t.setSourceDecorator(n),t.setTargetDecorator(null))},t.prototype.save=function(){var t=this;(new draw2d.io.json.Writer).marshal(this.canvas,(function(n){t.saveModelPart(t.currentModelPart,n)}))},t.prototype.load=function(){var t=new draw2d.io.json.Reader,n=this.loadModelPart(this.currentModelPart);this.canvas.clear(),t.unmarshal(this.canvas,n);var e=new draw2d.policy.figure.AntSelectionFeedbackPolicy;this.canvas.getFigures().data.forEach((function(t){return t.installEditPolicy(e)}))},t.prototype.reset=function(){if(confirm("Сбросить модель?")){for(var t=0;t<localStorage.length;t++)localStorage.removeItem(localStorage.key(t));window.location.reload()}},t.prototype.addNode=function(t){var n=this.nodesService.getNodeInstance(t);n.userData={name:"Узел "+Math.random()},n.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy),this.canvas.add(n),console.log("Node added",n)},t.prototype.togglePorts=function(){var t=this;this.portsVisible=!this.portsVisible,this.canvas.getAllPorts().data.forEach((function(n){return n.setVisible(t.portsVisible)}))},t.prototype.addLabel=function(t){var n=new draw2d.shape.note.PostIt({text:"Метка",x:20,y:20});n.installEditor(new draw2d.ui.LabelInplaceEditor),n.setFontColor(0),n.setBackgroundColor(null),t.add(n,new draw2d.layout.locator.DraggableLocator)},t.prototype.saveModelPart=function(t,n){localStorage.setItem(this.SAVED_MODEL_KEY+"."+t,JSON.stringify(n,null,2))},t.prototype.loadModelPart=function(t){var n=localStorage.getItem(this.SAVED_MODEL_KEY+"."+t);if(!n)return null;try{return JSON.parse(n)}catch(t){alert("Ошибка формата сохраненных даных: "+t.message)}},t})();i=o.a([e.i(a._2)({selector:"home",providers:[],styles:[e(703)],template:e(683)}),o.b("design:paramtypes",[r.a])],i)},530:function(t,n,e){"use strict";var o=e(531);e.d(n,"a",(function(){return o.a}))},531:function(t,n,e){"use strict";var o=e(26),r=e(0);e.d(n,"a",(function(){return a}));var a=(function(){function t(t,n){this.element=t,this.renderer=n,n.setElementStyle(t.nativeElement,"fontSize","x-large")}return t})();a=o.a([e.i(r.v)({selector:"[x-large]"}),o.b("design:paramtypes",[r.C,r.D])],a)},532:function(t,n,e){"use strict";var o=e(26),r=e(0);e.d(n,"a",(function(){return a}));var a=(function(){function t(){}return t})();a=o.a([e.i(r._2)({selector:"no-content",template:"\n    <div>\n      <h1>404: page missing</h1>\n    </div>\n  "})],a)},533:function(t,n,e){"use strict";var o=e(26),r=e(0);e.d(n,"a",(function(){return a}));var a=(function(){function t(){}return Object.defineProperty(t.prototype,"node",{get:function(){return this._node},set:function(t){this._node=t},enumerable:!0,configurable:!0}),t})();o.a([e.i(r.w)(),o.b("design:type",Object),o.b("design:paramtypes",[Object])],a.prototype,"node",null),a=o.a([e.i(r._2)({selector:"node-info",providers:[],template:e(684)})],a)},534:function(t,n,e){"use strict";var o=e(26),r=e(217),a=e(0);e.d(n,"a",(function(){return i}));var i=(function(){function t(t){this.nodesService=t,this.addNode=new a.G,this.nodes=t.getNodeTypes()}return t.prototype.onAddNode=function(t){this.addNode.emit(t)},t.prototype.getNodeByType=function(t){var n=this.nodesService.getNodeType(t);if(!n)throw new Error("Неизвестный тип узла: '"+t+"'");return new n.className},t})();o.a([e.i(a._1)(),o.b("design:type",Object)],i.prototype,"addNode",void 0),i=o.a([e.i(a._2)({selector:"nodes",providers:[],template:e(685)}),o.b("design:paramtypes",[r.a])],i)},678:function(t,n,e){n=t.exports=e(376)(),n.push([t.i,"body,html{height:100%;font-family:Arial,Helvetica,sans-serif}a.active{background-color:gray}",""])},679:function(t,n,e){n=t.exports=e(376)(),n.push([t.i,"",""])},680:function(t,n){},681:function(t,n){},682:function(t,n){t.exports="<div>\n  <router-outlet></router-outlet>\n</div>\n"},683:function(t,n){t.exports='<style>\n  .layout {\n    width: 100vw;\n    height: 100vh;\n    margin: 0 auto;\n    position: relative;\n  }\n\n  .sidebar, .content {\n    position: absolute;\n  }\n\n  .sidebar {\n    background: #C6DD7D;\n    width: 300px;\n    height: 100vh;\n  }\n\n  .content {\n    background: #fff9dc;\n    left: 300px;\n    width: 1000px;\n    height: 100vh;\n    overflow: scroll;\n  }\n</style>\n<div class="layout">\n  <div class="sidebar">\n    <div style="border: 1px solid black;">\n      <button class="btn" (click)="save()">Сохранить</button>\n      <button class="btn" (click)="load()">Загрузить</button>\n      <button class="btn" (click)="reset()">Очистить</button>\n    </div>\n    <div style="border: 1px solid black;">\n      <p>Управление</p>\n      <button class="btn" (click)="setRadius(selectedNode, radius.value)" [disabled]="!isConnection(selectedNode)">Радиус</button>\n      <input size="1" #radius type="number" value="0" min="0" step="1"><br>\n      <button class="btn" (click)="setArrows(selectedNode)" [disabled]="!isConnection(selectedNode)">Установить стрелку</button>\n      <button class="btn" (click)="addLabel(selectedNode)" [disabled]="!selectedNode">Добавить метку</button>\n      <button class="btn" (click)="editBlock(selectedNode)" [disabled]="!isBlock(selectedNode)">Редактировать блок</button>\n      <button class="btn" (click)="backToMainModel()" [disabled]="currentModelPart === \'main\'">Вернуться к модели</button>\n      <button class="btn" (click)="togglePorts()">{{portsVisible ? \'Спрятать\' : \'Показать\'}} порты</button>\n    </div>\n    <nodes (addNode)="addNode($event)"></nodes>\n    <node-info [node]="selectedNode"></node-info>\n  </div>\n  <div class="content">\n    <!--<div style="width: 100%; height: 100%; overflow: scroll;">-->\n      <div onselectstart="javascript:/*IE8 hack*/return false" id="gfx_holder"\n           style="width: 100%; height: 100%; cursor: default; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">\n\n      </div>\n    <!--</div>-->\n  </div>\n</div>\n'},684:function(t,n){t.exports='<div style="border: 1px solid black;">\n  <p>Информация по узлу</p>\n  <div *ngIf="node && node.userData">\n    <ul>\n      <li><label>Имя</label><input type="text" [(ngModel)]="node.userData.name"></li>\n    </ul>\n  </div>\n  <div *ngIf="node && !node.userData">\n    Узел не содержит даных\n  </div>\n  <div *ngIf="!node">\n    Узел не выбран\n  </div>\n</div>\n'},685:function(t,n){t.exports='<div>\n  <p>Добавить узлы</p>\n  <button *ngFor="let node of nodes" (click)="onAddNode(node.name)" class="btn">{{node.label}}</button>\n</div>\n'},702:function(t,n,e){var o=e(678);t.exports="string"==typeof o?o:o.toString()},703:function(t,n,e){var o=e(679);t.exports="string"==typeof o?o:o.toString()},704:function(t,n,e){"use strict";function o(){return e.i(r.a)().bootstrapModule(s.a).then(a.a).catch((function(t){return console.error(t)}))}Object.defineProperty(n,"__esModule",{value:!0});var r=e(393),a=e(251),i=e(252),s=(e.n(i),e(394));n.main=o,e.i(i.bootloader)(o)}},[704]);